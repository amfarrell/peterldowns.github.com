<!doctype HTML>
<html>
<head>
	<link href='//fonts.googleapis.com/css?family=Lato:700italic,400,400italic,700' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' type='text/css' href='/static/css/clearness.css'/>
    <link rel='stylesheet' type='text/css' href='/static/css/index.css' />
    <title> Opening iTerm From a Finder Directory &#8212; Peter Downs &#8212;&#160;Student / Hacker/ Human </title>
    <meta name='viewport' content='width=device-width'>
</head>

<body>
    <div id='page-wrap'>
        <div id='sidebar'>
            <img id='logo' src='/static/img/logo2x.png' />
            <div id='nav'>
                <!--<p> Hi. I'm from PA, living in SF. </p>-->
                <h3><a href='/'> Writing </a></h3>
                <h3><a href='/projects.html'> Projects </a></h3>
                <h3><a href='/about.html'> About </a></h3>
            </div>
        </div>
        <div id='content'>
            <div id='content-inner'>
                <div class='post'>
                    <p> Wednesday, March 14, 2012 </p>
                    <h1>Opening iTerm From a Finder Directory</h1>
<p>If, like me, you work mostly from OS X, you've probably already discovered <a href="http://www.iterm2.com/#/section/home">iTerm2</a>. If you haven't: it's an incredibly good replacement for the default Terminal application. Combined with the <a href="http://ethanschoonover.com/solarized">solarized</a> color scheme, it does what all software should: it fades away and lets me get my work done without an issue.</p>
<p>If you're like me in another way, you will occasionally use the Finder to browse through your files. The problem is that it's difficult to open an iTerm window set to the current Finder directory.</p>
<p>A couple of different people have come up with solutions. <a href="http://snippets.dzone.com/user/SimonDorfman">Simon Dorfman</a> came up with <a href="http://snippets.dzone.com/posts/show/961">an Applescript</a> to keep in the Finder sidebar or your dock; it opens iTerm tabs in any directory dropped on it. <a href="http://benalman.com/">Ben Alman</a> wrote <a href="https://gist.github.com/905546">a similar script</a> that does the same thing. But both of these require you to drag and drop an item onto a script that takes up space in your sidebar or dock.</p>
<p>I didn't want to clutter up my dock or Finder sidebar with a droppable script, so I adapted <a href="https://github.com/lsloan">Lance E Sloan</a>'s <a href="https://gist.github.com/1265327">script</a> and turned it into a Finder service.  Here's the script:</p>
<pre><code>on run {input, parameters}
    tell application "Finder"
        set dir_path to "\"" &amp; (POSIX path of (input as string)) &amp; "\""
            -- display dialog dir_path
    end tell
    CD_to(dir_path)
end run

on CD_to(theDir)
    tell application "iTerm"
        activate
        try
            set t to the last terminal
        on error
            set t to (make new terminal)
        end try
        tell t
            launch session "Default Session"
            tell the last session
                write text "cd " &amp; theDir &amp; ";clear;ls"
            end tell
        end tell
    end tell
end CD_to
</code></pre>
<p>Using Automator, create a new "Service" that accepts folders in Finder.</p>
<p><img alt="setting up the service" src="/static/img/applescript_service.jpeg" title="Setting up the service" /></p>
<p>Add a "Run Applescript" action and paste in the above code.
Save it as whatever you'd like - I saved mine as "open_iterm". Now, you can just right-click any folder from within Finder to 
open an iTerm tab there. Cool.</p>
<p><img alt="the service in action" src="/static/img/applescript_service_in_action.jpeg" title="Using the new service" /></p>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
