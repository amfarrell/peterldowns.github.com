<!doctype HTML>
<html>
  
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width'>
  <title> Opening iTerm From a Finder Directory &#8212; Peter Downs </title>
  
  <link href='//fonts.googleapis.com/css?family=Lato:700italic,400,400italic,700'
        rel='stylesheet'
        type='text/css' />
  <link href='//fonts.googleapis.com/css?family=Inconsolata'
        rel='stylesheet'
        type='text/css' />
  <link href='/static/css/clearness.css'
        rel='stylesheet'
        type='text/css' />
  <link href='/static/css/index.css'
        rel='stylesheet'
        type='text/css' />
  <link href="/static/css/highlightjs.css"
        rel="stylesheet"
        type='text/css'/>

  <script type='text/javascript'>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-40701023-1', 'peterdowns.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>
</head>

<body>
  <div id='page-wrap'>
    <div id="header">
        <h1 id='title'> Peter Downs </h1>
        <ul id='nav'>
            <li><a href='/'>Writing</a></li>
            <li><a href='/about.html'>About</a></li>
            <li><a href='https://github.com/peterldowns' target='_blank'>Github &#8594;</a></li>
            <li><a href='http://tumblr.peterdowns.com' target='_blank'>Tumblr &#8594;</a></li>
        </ul>
    </div>
    <div id='content'>
      <div class='post'>
        <h1>Opening iTerm From a Finder Directory</h1>
<p>If, like me, you work mostly from OS X, you've probably already discovered
<a href="http://www.iterm2.com/#/section/home">iTerm2</a>. If you haven't: it's an incredibly good replacement for the
default Terminal application. Combined with the <a href="http://ethanschoonover.com/solarized">solarized</a> color scheme, it
does what all software should: it fades away and lets me get my work done
without an issue.</p>
<p>If you're like me in another way, you will occasionally use the Finder to
browse through your files. The problem is that it's difficult to open an iTerm
window set to the current Finder directory.</p>
<p>A couple of different people have come up with solutions. <a href="http://snippets.dzone.com/user/SimonDorfman">Simon Dorfman</a>
came up with <a href="http://snippets.dzone.com/posts/show/961">an Applescript</a> to keep in the Finder sidebar or your dock; it
opens iTerm tabs in any directory dropped on it. <a href="http://benalman.com/">Ben Alman</a> wrote <a href="https://gist.github.com/905546">a
similar script</a> that does the same thing. But both of these require you to
drag and drop an item onto a script that takes up space in your sidebar or
dock.</p>
<p>I didn't want to clutter up my dock or Finder sidebar with a droppable script,
so I adapted <a href="https://github.com/lsloan">Lance E Sloan</a>'s <a href="https://gist.github.com/1265327">script</a> and turned it into a Finder
service.  Here's the script:</p>
<pre><code>on run {input, parameters}
    tell application "Finder"
        set dir_path to "\"" &amp; (POSIX path of (input as string)) &amp; "\""
            -- display dialog dir_path
    end tell
    CD_to(dir_path)
end run

on CD_to(theDir)
    tell application "iTerm"
        activate
        try
            set t to the last terminal
        on error
            set t to (make new terminal)
        end try
        tell t
            launch session "Default Session"
            tell the last session
                write text "cd " &amp; theDir &amp; ";clear;ls"
            end tell
        end tell
    end tell
end CD_to
</code></pre>
<p>Using Automator, create a new "Service" that accepts folders in Finder.</p>
<p><img alt="setting up the service" src="/static/img/applescript_service.jpeg" title="Setting up the service" /></p>
<p>Add a "Run Applescript" action and paste in the above code.  Save it as
whatever you'd like - I saved mine as "open_iterm". Now, you can just
right-click any folder from within Finder to open an iTerm tab there. Cool.</p>
<p><img alt="the service in action" src="/static/img/applescript_service_in_action.jpeg" title="Using the new service" /></p>
<h3>Update &mdash; June 24, 2013</h3>
<p>I just got a great email from <a href="https://github.com/eric-hu">Eric Hu</a> describing
a modified version of this script that can be run on files, not just folders.
<a href="https://gist.github.com/eric-hu/5846890">Check it out here</a> &mdash; thanks,
Eric!</p>
      </div>
    </div>
  </div>
</body>

<script src="/static/js/highlight.js"></script>
<script type="text/javascript">
  var codeBlocks = document.getElementsByTagName("pre");
  for (var i = 0; i < codeBlocks.length; i++) {
    var block = codeBlocks[i];
    hljs.highlightBlock(block);
  };
</script>

</html>
